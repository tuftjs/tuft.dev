---
layout: default
permalink: /docs/enabling-https/
docs: true
---
<div class="main-margin left"></div>
<main id="docs">
  {% include docs_nav.html %}
  <section id="docs-content">
    <h1>Enabling HTTPS</h1>
    <p>The prevous example is fine for development and testing purposes, but for real-world applications, or if you want to access your server from a browser, you'll need to run a secure server. To do that, you have two options:</p>
    <ol class="numbered-list">
      <li>Use a reverse proxy server to route incoming HTTPS connections to your Tuft server.</li>
      <li>Create your server by calling <code class="code-inline">.createSecureServer()</code> instead of <code
        class="code-inline">.createServer()</code>.</li>
    </ol>
    <p>The ideal choice for a production server is number one, but if we were to go with number two, we would rewrite
      our code like so:</p>
    <pre><code class="language-js">const { tuft } = require('tuft')
const { readFileSync } = require('fs')

...

const server = app.createSecureServer({
  key: readFileSync('key.pem'),
  cert: readFileSync('cert.pem'),
  port: 3000
})</code></pre>
    <p>For this example to work, we also need a private key and certificate in <code class="code-inline">.pem</code>
      format. As this is just an example, and not a real production server, we can just generate our own using the
      following command:</p>
    <pre><code class="language-shell">$ openssl req \
  -x509 \
  -newkey rsa:2048 \
  -nodes \
  -sha256 \
  -subj '/CN=localhost' \
  -keyout key.pem \
  -out cert.pem</code></pre>
    <p>Place the two freshly generated <code class="code-inline">.pem</code> files in the example server's root
      directory, then start the server again. If you visit <code class="code-inline">'https://localhost:3000'</code> in
      your web browser, you should be presented with the text <code class="code-inline">'Hello, world!'</code>.</p>
    <blockquote>
      <h4>Note:</h4>
      <p>Since you've generated your own certificates, and the browser has no way to verify the owner of the server, it
        will warn you that you're visiting an untrusted webpage. As you are the owner, you can safely ignore
        such warnings <em>for this example</em>.</p>
    </blockquote>
  </section>
</main>
<div class="main-margin right"></div>
