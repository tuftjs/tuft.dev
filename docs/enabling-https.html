---
layout: default
permalink: /docs/enabling-https/
docs: true
---
<div class="main-margin left"></div>
<main id="docs">
  {% include docs_nav.html %}
  <section id="docs-content">
    <h1>Enabling HTTPS</h1>
    <p>The prevous example is all fine for development and testing purposes, but for real-world applications you'll be
      needing to run a secure server. To do that, you have two options:</p>
    <ol>
      <li>Create your server by calling <code class="code-inline">.createSecureServer()</code> instead of <code
          class="code-inline">.createServer()</code>.</li>
      <li>Run a reverse proxy to route incoming HTTPS connections to your Tuft server. One of the most popular choices
        for running an HTTP/2 reverse proxy web server is <a
          href="https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/" target="_blank">nginx</a>.</li>
    </ol>
    <p>The ideal choice for a production server is number two, but if we were to go with number one, we would rewrite
      our code like so:</p>
    <pre><code class="language-js">const { createRouteMap } = require('tuft')
const { readFileSync } = require('fs')

...

const server = app.createSecureServer({
  key: readFileSync('key.pem'),
  cert: readFileSync('cert.pem'),
  port: 3000
})</code></pre>
    <p>For this example to work, we also need a private key and certificate in <code class="code-inline">.pem</code>
      format. As this is just an example, and not a real production server, we can just generate our own using the
      following command:</p>
    <pre><code class="language-shell">$ openssl req \
  -x509 \
  -newkey rsa:2048 \
  -nodes \
  -sha256 \
  -subj '/CN=localhost' \
  -keyout key.pem \
  -out cert.pem</code></pre>
    <p>Place the two freshly generated <code class="code-inline">.pem</code> files in the example server's root
      directory, then start the server again. If you visit <code class="code-inline">'https://localhost:3000'</code> in
      your web browser, you should be presented with the text <code class="code-inline">'Hello, world!'</code>.</p>
    <blockquote>
      <p><strong>Note:</strong></p>
      <p>Since you've generated your own certificates, and the browser has no way to verify the owner of the server, it
        will most likely warn you that you're visiting an untrusted webpage. As you are the owner, you can safely ignore
        such warnings for this example.</p>
    </blockquote>
  </section>
</main>
<div class="main-margin right"></div>
