---
layout: default
title: Tuft
docs: true
---
<div id="main-margin-left"></div>
<main id="main">
  {% include docs_nav.html %}
  <section id="content">
    <h1>Application</h1>
    <p>Many popular frameworks have a function as a default export that, when called, returns an object that is considered to be the "application". After adding routes, handlers, etc., the user is able to start a server by calling a method such as <code class="code-inline">.listen()</code> or <code class="code-inline">.start()</code>.</p>

    <p>In Tuft, the functionalty of this single "application" object is split into the following two objects:</p>
    <br>
    <h3>1. Route Map</h3>
    <p>This is an instance of <a href="/docs/api/tuft-route-map">TuftRouteMap</a> that is returned by <code class="code-inline">createRouteMap()</code>, and inherits from the JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map" target="_blank">Map</a> object. It stores routes and their associated response data as key/value pairs, where the key is a string that represents the request method and path, such as <code class="code-inline">'GET /foo'</code>, and the value is an object that contains the response data.</p>
    <pre><code class="language-js">const app = createRouteMap()

app.set('GET /foo', {
  text: 'Hello, world!'
})

const myRoute = app.get('GET /foo')

console.log(myRoute)

/**
 * {
 *   response: {
 *     text: 'Hello, world!'
 *   }
 * }
 */</code></pre>
    <br>
    <h3>2. Server</h3>
    <p>Once all the routes have been added to the route map, a server object can be created by calling the <code class="code-inline">.createServer()</code> or <code class="code-inline">.createSecureServer()</code> methods of <a href="/docs/api/tuft-route-map">TuftRouteMap</a>. When either of these methods is called, the data from the route map is compiled into a set of optimized functions and made available to the returned instance of <a href="/docs/api/tuft-server">TuftServer</a> or <a href="/docs/api/tuft-secure-server">TuftSecureServer</a>. The server can then be started and stopped using the <code class="code-inline">.start()</code> and <code class="code-inline">.stop()</code> methods.</p>
    <pre><code class="language-js">const server = app.createServer()

async function startServer() {
  await server.start()
}</code></pre>
  </section>
</main>
<div id="main-margin-right"></div>
